<!-- SearchForm.vue - 搜索表单组件 -->
<template>
  <div class="search-form">
    <el-form :model="formData" :inline="true" @submit.prevent="handleSearch">
      <el-form-item 
        v-for="field in fields" 
        :key="field.prop"
        :label="field.label"
      >
        <!-- 输入框 -->
        <el-input 
          v-if="field.type === 'input'"
          v-model="formData[field.prop]"
          :placeholder="field.placeholder"
          clearable
        />
        
        <!-- 选择器 -->
        <el-select 
          v-else-if="field.type === 'select'"
          v-model="formData[field.prop]"
          :placeholder="field.placeholder"
          clearable
        >
          <el-option 
            v-for="option in field.options"
            :key="option.value"
            :label="option.label"
            :value="option.value"
          />
        </el-select>
        
        <!-- 日期选择器 -->
        <el-date-picker
          v-else-if="field.type === 'date'"
          v-model="formData[field.prop]"
          type="date"
          :placeholder="field.placeholder"
        />
      </el-form-item>
      
      <el-form-item>
        <el-button type="primary" @click="handleSearch">搜索</el-button>
        <el-button @click="handleReset">重置</el-button>
      </el-form-item>
    </el-form>
  </div>
</template>

<script>
export default {
  name: 'SearchForm',
  props: {
    fields: {
      type: Array,
      required: true
    },
    initialData: {
      type: Object,
      default: () => ({})
    }
  },
  data() {
    return {
      formData: {}
    }
  },
  watch: {
    initialData: {
      handler(newVal) {
        this.formData = { ...newVal }
      },
      immediate: true,
      deep: true
    }
  },
  methods: {
    handleSearch() {
      this.$emit('search', this.formData)
    },
    handleReset() {
      this.formData = {}
      this.$emit('reset')
    }
  }
}
</script>

<!-- 使用示例 -->
<!--
<SearchForm 
  :fields="searchFields"
  :initial-data="searchData"
  @search="onSearch"
  @reset="onReset"
/>

data() {
  return {
    searchFields: [
      {
        prop: 'name',
        label: '姓名',
        type: 'input',
        placeholder: '请输入姓名'
      },
      {
        prop: 'status',
        label: '状态',
        type: 'select',
        placeholder: '请选择状态',
        options: [
          { label: '启用', value: 1 },
          { label: '禁用', value: 0 }
        ]
      },
      {
        prop: 'createTime',
        label: '创建时间',
        type: 'date',
        placeholder: '请选择日期'
      }
    ]
  }
}
-->